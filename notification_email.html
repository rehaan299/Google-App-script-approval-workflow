<!DOCTYPE html>
<html>
<head>
  <base target="_top">
</head>
<body style="margin:0; padding:0; background-color:#f4f7f6; font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">
  
  <table width="100%" border="0" cellpadding="0" cellspacing="0" style="background-color:#f4f7f6; padding:40px 0;">
    <tr>
      <td align="center">
        
        <table width="600" border="0" cellpadding="0" cellspacing="0" style="background-color:#ffffff; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.05); overflow:hidden;">
          
          <? 
            var bannerColor = "#3b82f6"; // Blue (Pending)
            var statusIcon = "⏳";
            if (decision === "approved") { bannerColor = "#10b981"; statusIcon = "✓"; }
            if (decision === "rejected") { bannerColor = "#ef4444"; statusIcon = "✕"; }
          ?>
          <tr>
            <td style="background-color: <?= bannerColor ?>; padding: 40px 0; text-align: center;">
              <div style="font-size: 48px; line-height: 1; color: rgba(255,255,255,0.9); margin-bottom: 10px;">
                <?= statusIcon ?>
              </div>
              <h1 style="margin: 0; color: #ffffff; font-size: 22px; text-transform: capitalize;">
                <?= decision ?>
              </h1>
              <div style="color: rgba(255,255,255,0.8); font-size: 13px; margin-top: 5px; text-transform: uppercase; letter-spacing: 1px;">
                Current Status
              </div>
            </td>
          </tr>

          <tr>
            <td style="padding: 40px;">
              <p style="font-size: 16px; color: #333; margin-bottom: 20px;">
                An update has been made to the request: <strong><?= title ?></strong>.
              </p>

              <div style="background-color: #f8fafc; border-radius: 8px; padding: 20px; border: 1px solid #e2e8f0;">
                <h3 style="margin-top: 0; font-size: 14px; color: #64748b; text-transform: uppercase;">Review Chain</h3>
                <table width="100%" cellpadding="5">
                  <? approvers.forEach(function(app) { 
                       var color = "#94a3b8"; // gray
                       var icon = "○";
                       if(app.status === "Approved") { color = "#10b981"; icon = "●"; }
                       if(app.status === "Rejected") { color = "#ef4444"; icon = "✕"; }
                       if(app.status === "Pending")  { color = "#f59e0b"; icon = "◑"; }
                  ?>
                    <tr>
                      <td width="20" style="color: <?= color ?>; font-size: 18px;"><?= icon ?></td>
                      <td style="font-size: 14px; font-weight: bold; color: #334155;">
                        <?= app.title ?> 
                        <span style="font-weight: normal; color: #94a3b8;">(<?= app.name ?>)</span>
                      </td>
                      <td align="right" style="font-size: 12px; color: <?= color ?>; font-weight: bold; text-transform: uppercase;">
                        <?= app.status ?>
                      </td>
                    </tr>
                  <? }) ?>
                </table>
              </div>
              
              <div style="text-align: center; margin-top: 30px;">
                <a href="<?= approvalProgressUrl ?>" style="background-color: #334155; color: #ffffff; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-size: 14px; font-weight: bold;">
                  View Live Progress
                </a>
              </div>

            </td>
          </tr>

        </table>
      </td>
    </tr>
  </table>

</body>
</html>
